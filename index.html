<!DOCTYPE html>
<html>
  <head>
    <title>PLANTS HUMANS ROBOTS</title>
    <meta charset="utf-8">
    
    <!-- >>>>>STYLESHEETS<<<<< -->
    <link href="gmuStyle.css" rel="stylesheet" type="text/css">
    
    <!-- >>>>>BOOTSTRAP SCRIPTS<<<<< -->
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery.js"></script>
    
    <!-- >>>>>D3 SCRIPTS<<<<< -->
    <script type="text/javascript" src="d3/d3.js"></script>
    
    <!-- >>>>>own SCRIPTS<<<<< 
    <script type="text/javascript" src="gmuModel.js"></script>
    <script type="text/javascript" src="gmuView.js"></script>
    <script type="text/javascript" src="gmuController.js"></script>
    <script type="text/javascript" src="gmuStart.js"></script>
    -->
  </head>
  <body>
    <div id="wrapper">
      <div id="gmuArt">
      </div>
    </div>
    <script type="text/javascript">
      var w = window.innerWidth-8;
      var h = window.innerHeight-8;
      

      var rect_count = 9000;
      var dataset = new Array();
      setup_grid(rect_count);
      draw_grid();


      function setup_grid(r_count){
        var _p_count = w*h;
        console.log("pixel:",_p_count);

        var _cols = Math.sqrt(r_count * (w/h));
        var _rows = r_count / _cols;
        _cols = Math.round(_cols);
        _rows = Math.round(_rows);

        console.log("actual rows:",_rows ,"actual cols:" ,_cols);

        var _r_w = w / _cols;
        var _r_h = h / _rows;
        console.log("actual w:",_r_w ,"actual h:" ,_r_h);

        var idx = 0;
        for(var r = 0; r < _rows; r++){
          for(var c = 0; c < _cols ; c++){
            dataset[idx] = new Object();
            dataset[idx]["id"]      = idx;
            dataset[idx]["width"]   = _r_w;
            dataset[idx]["pos_y"]   = _r_h * r;
            dataset[idx]["height"]  = _r_h;
            dataset[idx]["pos_x"]   = _r_w * c;
            dataset[idx]["touched"] = 0;
            idx++;
          }
        }
        alert(idx-1);
      }

      function draw_grid(){
        var backgroundGrid = d3.select("#gmuArt")
          .append("svg")
          .attr("width", w)
          .attr("height", h);
        var rects = backgroundGrid.selectAll("rect")
          .data(dataset)
          .enter()
          .append("rect")
        rects.attr("id", function(d,i){return "r"+i;})
          .attr("x", function(d,i){return dataset[i].pos_x})
          .attr("y", function(d,i){return dataset[i].pos_y})
          .attr("width", function(d,i){return dataset[i].width})
          .attr("height", function(d,i){return dataset[i].height})
          .attr("fill", "#111111")
          .attr("stroke", "#111111")
          .on("mouseover",  function(d,i) {
            backgroundGrid.select("#r"+parseInt(d.id))
                          .transition()
                          .duration(30)
                          .attr("fill","black");
          })
          .on("mouseout",  function(d,i) {
            backgroundGrid.select("#r"+parseInt(d.id))
                          .transition()
                          .duration(1000)
                          .attr("fill","#111111");
          })
          .on("click",  function(d,i) {
            backgroundGrid.select("#r"+parseInt(d.id))
                          .transition()
                          .duration(1000)
                          .attr("fill","#F11111");

          })
      }
    </script>
  </body>
</html>



